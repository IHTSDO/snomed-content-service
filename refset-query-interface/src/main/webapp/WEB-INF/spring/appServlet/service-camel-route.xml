<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="
          http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
          http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

	
	<bean id="xml2jsonDataformat" class="org.apache.camel.model.dataformat.XmlJsonDataFormat">
	    <property name="skipNamespaces" value="false" />
	    <property name="trimSpaces" value="true" />
	    <property name="forceTopLevelObject" value="true" />
	    <property name="rootName" value="newRoot" />
	   	<property name="expandableProperties" value="d e" />
	    
	</bean>

   	<camel:camelContext id="camelHttpContext" trace="true" >
  		<camel:package>org.ihtsdo.otf.refset.service</camel:package>
  		<camel:route>
  			<camel:from uri="direct:start" />
  			<camel:to uri="http://content.ihtsdotools.org:3030/snomed/query" />
  		</camel:route>
   	</camel:camelContext>
   	
   	<camel:camelContext id="xmljsonCtx" trace="true" >
	  	<camel:route>
	    	<camel:from uri="direct:unmarshalWithOptions"/>
	    	<camel:marshal ref="xml2jsonDataformat"/>
	    	<camel:to uri="mock:jsonWithOptions"/>
		</camel:route>
   	</camel:camelContext>
   	   	
	
    
	<bean id="fusekiRefsetQueryService" class="org.ihtsdo.otf.refset.service.RefsetHttpQueryServiceImpl">
		<property name="endpointUri" value="${fuseki.endpoints}"/>
		<property name="template" ref="producerTemplate" />
	</bean>
	
	<bean id="kiwiRefsetQueryService" class="org.ihtsdo.otf.refset.service.RefsetHttpQueryServiceImpl">
		<property name="endpointUri" value="${kiwi.endpoints}"/>
		<property name="template" ref="producerTemplate" />
	</bean>
	
	<bean id="fusekiRefsetUpdateService" class="org.ihtsdo.otf.refset.service.RefsetHttpUpdateServiceImpl">
		<property name="endpointUri" value="${fuseki.update.endpoints}"/>
		<property name="template" ref="producerTemplate" />
	</bean>
	
	<bean id="kiwiRefsetUpdateService" class="org.ihtsdo.otf.refset.service.RefsetHttpUpdateServiceImpl">
		<property name="endpointUri" value="${kiwi.update.endpoints}"/>
		<property name="template" ref="producerTemplate" />
	</bean>
	
	   
	
	<camel:template camelContextId="camelHttpContext" id="producerTemplate"  defaultEndpoint="http://content.ihtsdotools.org:3030/snomed/query"/>
</beans>