<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xmlns:c="http://www.springframework.org/schema/c"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd">


	<bean id="refset.graph.orientdb.config" 
			class="org.apache.commons.configuration.MapConfiguration" 
			c:map-ref="refsetGraphOrientdbProps" />

	
	<util:map id="refsetGraphOrientdbProps">
	
         <entry key="blueprints.graph" value="com.tinkerpop.blueprints.impls.orient.OrientGraph"/>
         <entry key="blueprints.orientdb.url" value="${blueprints.orientdb.url}"/>
         <entry key="blueprints.orientdb.username" value="${blueprints.orientdb.username}"/>
         <entry key="blueprints.orientdb.password" value="${blueprints.orientdb.password}"/>
         <entry key="blueprints.orientdb.pool.min" value="${blueprints.orientdb.pool.min}"/>
         <entry key="blueprints.orientdb.pool.max" value="${blueprints.orientdb.pool.max}"/>
         
	</util:map>
	<!-- 
	
		private static OrientGraphFactory getOgFactory() {
		
		OrientGraphFactory f = new OrientGraphFactory(gsConfig.getString(OG_URL), 
				gsConfig.getString(OG_USER), gsConfig.getString(OG_PASSWORD))
				.setupPool(gsConfig.getInt(OG_CON_POOL_MIN), 
						gsConfig.getInt(OG_CON_POOL_MAX));
		
		LOGGER.info("################ {}"   , f);

		return f;
	} -->
	
	<bean id="refsetGraphOrientdbFactory" 
			class="com.tinkerpop.blueprints.impls.orient.OrientGraphFactory" 
			c:iURL="${blueprints.orientdb.url}"
			c:iPassword="${blueprints.orientdb.password}" 
			c:iUser="${blueprints.orientdb.username}" 
		/>
			
	
 	<bean class="org.springframework.beans.factory.config.MethodInvokingBean">
   		<property name="targetObject" ref="refsetGraphOrientdbFactory" />
   		<property name="targetMethod" value="setupPool"/>
   		<property name="arguments">
			<list>
				<value type="java.lang.Integer">${blueprints.orientdb.pool.min}</value>
				<value type="java.lang.Integer">${blueprints.orientdb.pool.max}</value>
			</list>
   		</property>
 	</bean>	

</beans>
